{"ast":null,"code":"import _objectSpread from\"/Users/valentinkuzmich/Desktop/projects Go IT/goit-react-hw-08-phonebook/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/valentinkuzmich/Desktop/projects Go IT/goit-react-hw-08-phonebook/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/valentinkuzmich/Desktop/projects Go IT/goit-react-hw-08-phonebook/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";// const BASE_URL = \"https://621e9d00849220b1fc9db0af.mockapi.io/api/phone/contacts\";\nvar BASE_URL=\"https://connections-api.herokuapp.com\";var API_ENDPOINT='contacts';var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(path){var options,res,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:options=_args.length>1&&_args[1]!==undefined?_args[1]:{};_context.next=3;return fetch(\"\".concat(BASE_URL,\"/\").concat(path),options);case 3:res=_context.sent;return _context.abrupt(\"return\",res.ok?res.json():Promise.reject(new Error(res.statusText)));case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(_x){return _ref.apply(this,arguments);};}();///MOCAPI\n// const getItems = (endpoint, options) => fetchData(endpoint, options);\n/// 8-ма домашня\nvar getItems=function getItems(token){var options={method:'GET',headers:{'Content-Type':'application/json; charset=UTF-8',Authorization:\"Bearer \".concat(token)}};return fetchData(API_ENDPOINT,options);};var saveItem=function saveItem(item,token){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var finalOptions=_objectSpread({method:\"POST\",body:JSON.stringify(item),headers:{\"Content-Type\":\"application/json; charset=UTF-8\",Authorization:\"Bearer \".concat(token)}},options);return fetchData(API_ENDPOINT,finalOptions);};var editItem=function editItem(_ref2,token){var id=_ref2.id,name=_ref2.name,number=_ref2.number;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var finalBody={name:name,number:number};var finalOptions=_objectSpread({method:\"PATCH\",body:JSON.stringify(finalBody),headers:{\"Content-Type\":\"application/json; charset=UTF-8\",Authorization:\"Bearer \".concat(token)}},options);return fetchData(\"\".concat(API_ENDPOINT,\"/\").concat(id),finalOptions);};var deleteItem=function deleteItem(id,token){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return fetchData(\"\".concat(API_ENDPOINT,\"/\").concat(id),_objectSpread({method:\"DELETE\",headers:{\"Content-Type\":\"application/json; charset=UTF-8\",Authorization:\"Bearer \".concat(token)}},options));};export{getItems,saveItem,editItem,deleteItem};","map":{"version":3,"names":["BASE_URL","API_ENDPOINT","fetchData","path","options","fetch","res","ok","json","Promise","reject","Error","statusText","getItems","token","method","headers","Authorization","saveItem","item","finalOptions","body","JSON","stringify","editItem","id","name","number","finalBody","deleteItem"],"sources":["/Users/valentinkuzmich/Desktop/projects Go IT/goit-react-hw-08-phonebook/src/utils/api-fetch.js"],"sourcesContent":["\n// const BASE_URL = \"https://621e9d00849220b1fc9db0af.mockapi.io/api/phone/contacts\";\n\nconst BASE_URL = \"https://connections-api.herokuapp.com\";\nconst API_ENDPOINT = 'contacts';\n\nconst fetchData = async (path, options = {}) => {\n  const res = await fetch(`${BASE_URL}/${path}`, options);\n  return res.ok ? res.json() : Promise.reject(new Error(res.statusText));\n};\n\n///MOCAPI\n// const getItems = (endpoint, options) => fetchData(endpoint, options);\n\n/// 8-ма домашня\nconst getItems = (token) => {\n  const options = {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json; charset=UTF-8',\n      Authorization: `Bearer ${token}`,\n    },\n  };\n  return fetchData(API_ENDPOINT, options);\n};\n\n\n\nconst saveItem = ( item,token,options = {}) => {\n  const finalOptions = {\n    method: \"POST\",\n    body: JSON.stringify(item),\n    headers: {\n      \"Content-Type\": \"application/json; charset=UTF-8\",\n      Authorization: `Bearer ${token}`\n    },\n    ...options,\n  };\n  return fetchData(API_ENDPOINT, finalOptions);\n};\n\nconst editItem = ({id,name,number}, token, options = {}) => {\n  const finalBody = {\n    name,\n    number\n  }\n  const finalOptions = {\n    method: \"PATCH\",\n    body: JSON.stringify(finalBody),\n    headers: {\n      \"Content-Type\": \"application/json; charset=UTF-8\",\n      Authorization: `Bearer ${token}`\n    },\n    ...options,\n  };\n  return fetchData(`${API_ENDPOINT}/${id}`, finalOptions);\n};\n\nconst deleteItem = (id, token, options = {}) => \n{\n  return fetchData(`${API_ENDPOINT}/${id}`, {\n    method: \"DELETE\",\n      headers: {\n      \"Content-Type\": \"application/json; charset=UTF-8\",\n      Authorization: `Bearer ${token}`\n    },  ...options\n  })};\n\nexport { getItems, saveItem,editItem, deleteItem };"],"mappings":"yeACA;AAEA,GAAMA,SAAQ,CAAG,uCAAjB,CACA,GAAMC,aAAY,CAAG,UAArB,CAEA,GAAMC,UAAS,4FAAG,iBAAOC,IAAP,oJAAaC,OAAb,+CAAuB,EAAvB,uBACEC,MAAK,WAAIL,QAAJ,aAAgBG,IAAhB,EAAwBC,OAAxB,CADP,QACVE,GADU,+CAETA,GAAG,CAACC,EAAJ,CAASD,GAAG,CAACE,IAAJ,EAAT,CAAsBC,OAAO,CAACC,MAAR,CAAe,GAAIC,MAAJ,CAAUL,GAAG,CAACM,UAAd,CAAf,CAFb,wDAAH,kBAATV,UAAS,4CAAf,CAKA;AACA;AAEA;AACA,GAAMW,SAAQ,CAAG,QAAXA,SAAW,CAACC,KAAD,CAAW,CAC1B,GAAMV,QAAO,CAAG,CACdW,MAAM,CAAE,KADM,CAEdC,OAAO,CAAE,CACP,eAAgB,iCADT,CAEPC,aAAa,kBAAYH,KAAZ,CAFN,CAFK,CAAhB,CAOA,MAAOZ,UAAS,CAACD,YAAD,CAAeG,OAAf,CAAhB,CACD,CATD,CAaA,GAAMc,SAAQ,CAAG,QAAXA,SAAW,CAAEC,IAAF,CAAOL,KAAP,CAA8B,IAAjBV,QAAiB,2DAAP,EAAO,CAC7C,GAAMgB,aAAY,gBAChBL,MAAM,CAAE,MADQ,CAEhBM,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeJ,IAAf,CAFU,CAGhBH,OAAO,CAAE,CACP,eAAgB,iCADT,CAEPC,aAAa,kBAAYH,KAAZ,CAFN,CAHO,EAObV,OAPa,CAAlB,CASA,MAAOF,UAAS,CAACD,YAAD,CAAemB,YAAf,CAAhB,CACD,CAXD,CAaA,GAAMI,SAAQ,CAAG,QAAXA,SAAW,OAAmBV,KAAnB,CAA2C,IAAzCW,GAAyC,OAAzCA,EAAyC,CAAtCC,IAAsC,OAAtCA,IAAsC,CAAjCC,MAAiC,OAAjCA,MAAiC,IAAjBvB,QAAiB,2DAAP,EAAO,CAC1D,GAAMwB,UAAS,CAAG,CAChBF,IAAI,CAAJA,IADgB,CAEhBC,MAAM,CAANA,MAFgB,CAAlB,CAIA,GAAMP,aAAY,gBAChBL,MAAM,CAAE,OADQ,CAEhBM,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeK,SAAf,CAFU,CAGhBZ,OAAO,CAAE,CACP,eAAgB,iCADT,CAEPC,aAAa,kBAAYH,KAAZ,CAFN,CAHO,EAObV,OAPa,CAAlB,CASA,MAAOF,UAAS,WAAID,YAAJ,aAAoBwB,EAApB,EAA0BL,YAA1B,CAAhB,CACD,CAfD,CAiBA,GAAMS,WAAU,CAAG,QAAbA,WAAa,CAACJ,EAAD,CAAKX,KAAL,CACnB,IAD+BV,QAC/B,2DADyC,EACzC,CACE,MAAOF,UAAS,WAAID,YAAJ,aAAoBwB,EAApB,iBACdV,MAAM,CAAE,QADM,CAEZC,OAAO,CAAE,CACT,eAAgB,iCADP,CAETC,aAAa,kBAAYH,KAAZ,CAFJ,CAFG,EAKPV,OALO,EAAhB,CAMG,CARL,CAUA,OAASS,QAAT,CAAmBK,QAAnB,CAA4BM,QAA5B,CAAsCK,UAAtC"},"metadata":{},"sourceType":"module"}