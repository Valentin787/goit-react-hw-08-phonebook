{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/valentinkuzmich/Desktop/projects Go IT/goit-react-hw-08-phonebook/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _slicedToArray from\"/Users/valentinkuzmich/Desktop/projects Go IT/goit-react-hw-08-phonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useEffect,useRef,useState}from\"react\";import{useTranslation}from\"react-i18next\";import{useSelector}from\"react-redux\";import{alarmState}from\"redux/alarm/alarmsSelectors\";import Alarm from'../../alarmSignal.mp3';import{monthTranslation,months}from\"../../data/data\";import{jsx as _jsx}from\"react/jsx-runtime\";var alarm=new Audio(Alarm);alarm.loop=true;export var AlarmContext=/*#__PURE__*/createContext();function ContextAlarm(_ref){var children=_ref.children;var alarms=useSelector(alarmState);var _useTranslation=useTranslation(),t=_useTranslation.t;var lang=useTranslation();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),hourDigital=_useState2[0],setHourDigital=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),minutesDigital=_useState4[0],setMinutesDigital=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),amPm=_useState6[0],setAmPm=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),dayNow=_useState8[0],setDayNow=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),monthNow=_useState10[0],setMonthNow=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),yearNow=_useState12[0],setYearNow=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),alarmTime=_useState14[0],setAlarmTime=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),activeTime=_useState16[0],setActiveTime=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),hasAlarm=_useState18[0],setHasAlarm=_useState18[1];var isCurrent=useRef(true);//CHANGE_LANGUAGES\nuseEffect(function(){monthTranslation(lang.i18n.language);},[lang]);//GET_CURRENT_DATE\nuseEffect(function(){setInterval(function(){var date=new Date();var HH=date.getHours(),MM=date.getMinutes(),day=date.getDate(),month=date.getMonth(),year=date.getFullYear(),ampm;if(HH>=12){HH=HH-12;ampm=\"PM\";}else{ampm=\"AM\";}if(HH===0)HH=12;if(HH<10)HH=\"0\".concat(HH);if(MM<10)MM=\"0\".concat(MM);setHourDigital(HH);setMinutesDigital(MM);setAmPm(ampm);setDayNow(day);setMonthNow(months[month]);setYearNow(year);},1000);},[]);var currentTime=\"\".concat(hourDigital,\":\").concat(minutesDigital,\" \").concat(amPm);//ACTIVE_PLAY\nuseEffect(function(){if(isCurrent.current){isCurrent.current=false;return;};var activeAlarm=function activeAlarm(){var _iterator=_createForOfIteratorHelper(alarms),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;if(item.time===currentTime&&item.isToggle===true){setActiveTime(item);alarm.play();alarm.loop=true;setHasAlarm(true);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}};activeAlarm();},[alarms,currentTime]);var pauseAlarm=function pauseAlarm(){alarm.pause();setAlarmTime(\"\");};//STOP_MUSIC\nuseEffect(function(){if(!activeTime)return;if(activeTime.isToggle===false){alarm.pause();setHasAlarm(false);pauseAlarm();}setActiveTime(null);},[activeTime,currentTime]);return/*#__PURE__*/_jsx(AlarmContext.Provider,{value:{hourDigital:hourDigital,minutesDigital:minutesDigital,amPm:amPm,dayNow:dayNow,monthNow:monthNow,yearNow:yearNow,alarmTime:alarmTime,setAlarmTime:setAlarmTime,pauseAlarm:pauseAlarm,hasAlarm:hasAlarm,setHasAlarm:setHasAlarm},children:children});}export default ContextAlarm;","map":{"version":3,"names":["createContext","useEffect","useRef","useState","useTranslation","useSelector","alarmState","Alarm","monthTranslation","months","alarm","Audio","loop","AlarmContext","ContextAlarm","children","alarms","t","lang","hourDigital","setHourDigital","minutesDigital","setMinutesDigital","amPm","setAmPm","dayNow","setDayNow","monthNow","setMonthNow","yearNow","setYearNow","alarmTime","setAlarmTime","activeTime","setActiveTime","hasAlarm","setHasAlarm","isCurrent","i18n","language","setInterval","date","Date","HH","getHours","MM","getMinutes","day","getDate","month","getMonth","year","getFullYear","ampm","currentTime","current","activeAlarm","item","time","isToggle","play","pauseAlarm","pause"],"sources":["/Users/valentinkuzmich/Desktop/projects Go IT/goit-react-hw-08-phonebook/src/components/context/ContextAlarm.jsx"],"sourcesContent":["import { createContext, useEffect, useRef, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useSelector } from \"react-redux\";\nimport { alarmState } from \"redux/alarm/alarmsSelectors\";\n\nimport Alarm from '../../alarmSignal.mp3'\nimport { monthTranslation, months } from \"../../data/data\";\n\nlet alarm = new Audio(Alarm);\n\talarm.loop = true;\n\nexport const AlarmContext = createContext();\n\nfunction ContextAlarm({ children }) {\n  const alarms = useSelector(alarmState)\n   \n  const { t } = useTranslation();\n  const lang = useTranslation();\n\n\n  const [hourDigital, setHourDigital] = useState(\"\");\n  const [minutesDigital, setMinutesDigital] = useState(\"\");\n  const [amPm, setAmPm] = useState(\"\");\n  const [dayNow, setDayNow] = useState(\"\");\n  const [monthNow, setMonthNow] = useState(\"\");\n  const [yearNow, setYearNow] = useState(\"\");\n  const [alarmTime, setAlarmTime] = useState(\"\");\n  const [activeTime, setActiveTime] = useState(null)\n\n  const [hasAlarm, setHasAlarm] = useState(false);\n\n  const isCurrent = useRef(true);\n\n  //CHANGE_LANGUAGES\n  useEffect(() => {\n    monthTranslation(lang.i18n.language)\n  }, [lang]);\n\n  //GET_CURRENT_DATE\n  useEffect(() => {\n    setInterval(() => {\n      let date = new Date();\n\n      let HH = date.getHours(),\n        MM = date.getMinutes(),\n        day = date.getDate(),\n        month = date.getMonth(),\n        \n        year = date.getFullYear(),\n        ampm;\n\n      if (HH >= 12) {\n        HH = HH - 12;\n        ampm = \"PM\";\n      } else {\n        ampm = \"AM\";\n      }\n\n      if (HH === 0) HH = 12;\n      if (HH < 10) HH = `0${HH}`;\n      if (MM < 10) MM = `0${MM}`;\n\n      setHourDigital(HH);\n      setMinutesDigital(MM);\n      setAmPm(ampm);\n      setDayNow(day);\n      setMonthNow(months[month]);\n      setYearNow(year);\n    }, 1000);\n  }, []);\n\n  const currentTime = `${hourDigital}:${minutesDigital} ${amPm}`;\n\n  //ACTIVE_PLAY\n  useEffect(() => {\n    if (isCurrent.current) {\n      isCurrent.current = false;\n      return\n    };\n\n    const activeAlarm = () => {\n    for (const item of alarms) {\n    if (item.time === currentTime && item.isToggle === true) {\n      setActiveTime(item) \n      alarm.play();\n      alarm.loop = true;\n       setHasAlarm(true)\n     }\n    }\n    }\n   activeAlarm();\n  }, [alarms, currentTime])\n  \n  const pauseAlarm = () => {\n    alarm.pause();\n    setAlarmTime(\"\");\n  };\n  \n  //STOP_MUSIC\n  useEffect(() => {\n\n    if (!activeTime) return;\n\n    if (activeTime.isToggle === false) {\n      alarm.pause();\n      setHasAlarm(false);\n      pauseAlarm();\n    }\n    setActiveTime(null);\n\n  }, [activeTime, currentTime])\n  \n\n  return (\n    <AlarmContext.Provider\n      value={{\n        hourDigital,\n        minutesDigital,\n        amPm,\n        dayNow,\n        monthNow,\n        yearNow,\n        alarmTime,\n        setAlarmTime,\n        pauseAlarm,\n        hasAlarm,\n        setHasAlarm,\n      }}\n    >\n      {children}\n    </AlarmContext.Provider>\n  );\n}\n\nexport default ContextAlarm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}