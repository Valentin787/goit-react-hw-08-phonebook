{"ast":null,"code":"var _jsxFileName = \"/Users/valentinkuzmich/Desktop/projects Go IT/goit-react-hw-08-phonebook/src/components/context/ContextAlarm.jsx\",\n    _s = $RefreshSig$();\n\nimport { createContext, useEffect, useRef, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { alarmState } from \"redux/alarm/alarmsSelectors\";\nimport Alarm from '../../alarmSignal.mp3';\nimport months from \"../../data/data\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet alarm = new Audio(Alarm);\nalarm.loop = true;\nexport const AlarmContext = /*#__PURE__*/createContext();\n\nfunction ContextAlarm(_ref) {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const alarms = useSelector(alarmState);\n  const [hourDigital, setHourDigital] = useState(\"\");\n  const [minutesDigital, setMinutesDigital] = useState(\"\");\n  const [amPm, setAmPm] = useState(\"\");\n  const [dayNow, setDayNow] = useState(\"\");\n  const [monthNow, setMonthNow] = useState(\"\");\n  const [yearNow, setYearNow] = useState(\"\");\n  const [alarmTime, setAlarmTime] = useState(\"\");\n  const [activeTime, setActiveTime] = useState(null);\n  const [hasAlarm, setHasAlarm] = useState(false);\n  const isCurrent = useRef(true);\n  useEffect(() => {\n    setInterval(() => {\n      let date = new Date();\n      let HH = date.getHours(),\n          MM = date.getMinutes(),\n          day = date.getDate(),\n          month = date.getMonth(),\n          year = date.getFullYear(),\n          ampm;\n\n      if (HH >= 12) {\n        HH = HH - 12;\n        ampm = \"PM\";\n      } else {\n        ampm = \"AM\";\n      }\n\n      if (HH === 0) HH = 12;\n      if (HH < 10) HH = `0${HH}`;\n      if (MM < 10) MM = `0${MM}`;\n      console.log(month);\n      setHourDigital(HH);\n      setMinutesDigital(MM);\n      setAmPm(ampm);\n      setDayNow(day);\n      setMonthNow(months[month]);\n      setYearNow(year);\n    }, 1000);\n  }, []);\n  const currentTime = `${hourDigital}:${minutesDigital} ${amPm}`; //ACTIVE_PLAY\n\n  useEffect(() => {\n    if (isCurrent.current) {\n      isCurrent.current = false;\n      return;\n    }\n\n    ;\n\n    const activeAlarm = () => {\n      for (const item of alarms) {\n        if (item.time === currentTime && item.isToggle === true) {\n          setActiveTime(item);\n          alarm.play();\n          alarm.loop = true;\n          setHasAlarm(true);\n        }\n      }\n    };\n\n    activeAlarm();\n  }, [alarms, currentTime]);\n\n  const pauseAlarm = () => {\n    alarm.pause();\n    setAlarmTime(\"\");\n  };\n\n  useEffect(() => {\n    if (!activeTime) return;\n\n    if (activeTime.isToggle === false) {\n      alarm.pause();\n      setHasAlarm(false);\n      pauseAlarm();\n    }\n\n    setActiveTime(null);\n  }, [activeTime, currentTime]);\n  return /*#__PURE__*/_jsxDEV(AlarmContext.Provider, {\n    value: {\n      hourDigital,\n      minutesDigital,\n      amPm,\n      dayNow,\n      monthNow,\n      yearNow,\n      alarmTime,\n      setAlarmTime,\n      pauseAlarm,\n      hasAlarm,\n      setHasAlarm\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ContextAlarm, \"KwREJsGpjZLWF4rZw0Hhu5nxLqs=\", false, function () {\n  return [useSelector];\n});\n\n_c = ContextAlarm;\nexport default ContextAlarm;\n\nvar _c;\n\n$RefreshReg$(_c, \"ContextAlarm\");","map":{"version":3,"names":["createContext","useEffect","useRef","useState","useSelector","alarmState","Alarm","months","alarm","Audio","loop","AlarmContext","ContextAlarm","children","alarms","hourDigital","setHourDigital","minutesDigital","setMinutesDigital","amPm","setAmPm","dayNow","setDayNow","monthNow","setMonthNow","yearNow","setYearNow","alarmTime","setAlarmTime","activeTime","setActiveTime","hasAlarm","setHasAlarm","isCurrent","setInterval","date","Date","HH","getHours","MM","getMinutes","day","getDate","month","getMonth","year","getFullYear","ampm","console","log","currentTime","current","activeAlarm","item","time","isToggle","play","pauseAlarm","pause"],"sources":["/Users/valentinkuzmich/Desktop/projects Go IT/goit-react-hw-08-phonebook/src/components/context/ContextAlarm.jsx"],"sourcesContent":["import { createContext, useEffect, useRef, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { alarmState } from \"redux/alarm/alarmsSelectors\";\n\nimport Alarm from '../../alarmSignal.mp3'\nimport months from \"../../data/data\";\n\nlet alarm = new Audio(Alarm);\n\talarm.loop = true;\n\nexport const AlarmContext = createContext();\n\nfunction ContextAlarm({ children }) {\n  const alarms =useSelector(alarmState)\n\n  const [hourDigital, setHourDigital] = useState(\"\");\n  const [minutesDigital, setMinutesDigital] = useState(\"\");\n  const [amPm, setAmPm] = useState(\"\");\n  const [dayNow, setDayNow] = useState(\"\");\n  const [monthNow, setMonthNow] = useState(\"\");\n  const [yearNow, setYearNow] = useState(\"\");\n  const [alarmTime, setAlarmTime] = useState(\"\");\n  const [activeTime, setActiveTime] = useState(null)\n\n  const [hasAlarm, setHasAlarm] = useState(false);\n\n  const isCurrent = useRef(true);\n\n\n  useEffect(() => {\n    setInterval(() => {\n      let date = new Date();\n\n      let HH = date.getHours(),\n        MM = date.getMinutes(),\n        day = date.getDate(),\n        month = date.getMonth(),\n        \n        year = date.getFullYear(),\n        ampm;\n\n      if (HH >= 12) {\n        HH = HH - 12;\n        ampm = \"PM\";\n      } else {\n        ampm = \"AM\";\n      }\n\n      if (HH === 0) HH = 12;\n      if (HH < 10) HH = `0${HH}`;\n      if (MM < 10) MM = `0${MM}`;\n      console.log(month)\n\n      setHourDigital(HH);\n      setMinutesDigital(MM);\n      setAmPm(ampm);\n      setDayNow(day);\n      setMonthNow(months[month]);\n      setYearNow(year);\n    }, 1000);\n  }, []);\n\n  const currentTime = `${hourDigital}:${minutesDigital} ${amPm}`;\n  //ACTIVE_PLAY\n  useEffect(() => {\n    if (isCurrent.current) {\n      isCurrent.current = false;\n      return\n    };\n\n    const activeAlarm = () => {\n    for (const item of alarms) {\n    if (item.time === currentTime && item.isToggle === true) {\n      setActiveTime(item) \n      alarm.play();\n      alarm.loop = true;\n       setHasAlarm(true)\n     }\n    }\n    }\n   activeAlarm();\n  }, [alarms, currentTime])\n  \n   const pauseAlarm = () => {\n      \n     alarm.pause();\n     \n      setAlarmTime(\"\");\n   };\n  \n  \n  useEffect(() => {\n\n    if (!activeTime) return;\n\n    if (activeTime.isToggle === false) {\n      alarm.pause();\n      setHasAlarm(false);\n      pauseAlarm();\n    }\n    setActiveTime(null);\n\n  }, [activeTime, currentTime])\n  \n\n  return (\n    <AlarmContext.Provider\n      value={{\n        hourDigital,\n        minutesDigital,\n        amPm,\n        dayNow,\n        monthNow,\n        yearNow,\n        alarmTime,\n        setAlarmTime,\n        pauseAlarm,\n        hasAlarm,\n        setHasAlarm,\n      }}\n    >\n      {children}\n    </AlarmContext.Provider>\n  );\n}\n\nexport default ContextAlarm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}