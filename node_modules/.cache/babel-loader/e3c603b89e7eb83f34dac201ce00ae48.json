{"ast":null,"code":"// const BASE_URL = \"https://621e9d00849220b1fc9db0af.mockapi.io/api/phone/contacts\";\nconst BASE_URL = \"https://connections-api.herokuapp.com\";\nconst API_ENDPOINT = 'contacts';\n\nconst fetchData = async function (path) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const res = await fetch(`${BASE_URL}/${path}`, options);\n  return res.ok ? res.json() : Promise.reject(new Error(res.statusText));\n}; ///MOCAPI\n// const getItems = (endpoint, options) => fetchData(endpoint, options);\n/// 8-ма домашня\n\n\nconst getItems = token => {\n  const options = {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json; charset=UTF-8',\n      Authorization: `Bearer ${token}`\n    }\n  };\n  return fetchData(API_ENDPOINT, options);\n};\n\nconst saveItem = function (item, token) {\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  const finalOptions = {\n    method: \"POST\",\n    body: JSON.stringify(item),\n    headers: {\n      \"Content-Type\": \"application/json; charset=UTF-8\",\n      Authorization: `Bearer ${token}`\n    },\n    ...options\n  };\n  return fetchData(API_ENDPOINT, finalOptions);\n};\n\nconst editItem = function (_ref, token) {\n  let {\n    id,\n    name,\n    number\n  } = _ref;\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  const finalBody = {\n    name,\n    number\n  };\n  const finalOptions = {\n    method: \"PATCH\",\n    body: JSON.stringify(finalBody),\n    headers: {\n      \"Content-Type\": \"application/json; charset=UTF-8\",\n      Authorization: `Bearer ${token}`\n    },\n    ...options\n  };\n  return fetchData(`${API_ENDPOINT}/${id}`, finalOptions);\n};\n\nconst deleteItem = function (id, token) {\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return fetchData(`${API_ENDPOINT}/${id}`, {\n    method: \"DELETE\",\n    headers: {\n      \"Content-Type\": \"application/json; charset=UTF-8\",\n      Authorization: `Bearer ${token}`\n    },\n    ...options\n  });\n};\n\nexport { getItems, saveItem, editItem, deleteItem };","map":{"version":3,"names":["BASE_URL","API_ENDPOINT","fetchData","path","options","res","fetch","ok","json","Promise","reject","Error","statusText","getItems","token","method","headers","Authorization","saveItem","item","finalOptions","body","JSON","stringify","editItem","id","name","number","finalBody","deleteItem"],"sources":["/Users/valentinkuzmich/Desktop/projects Go IT/goit-react-hw-08-phonebook/src/utils/api-fetch.js"],"sourcesContent":["\n// const BASE_URL = \"https://621e9d00849220b1fc9db0af.mockapi.io/api/phone/contacts\";\n\nconst BASE_URL = \"https://connections-api.herokuapp.com\";\nconst API_ENDPOINT = 'contacts';\n\nconst fetchData = async (path, options = {}) => {\n  const res = await fetch(`${BASE_URL}/${path}`, options);\n  return res.ok ? res.json() : Promise.reject(new Error(res.statusText));\n};\n\n///MOCAPI\n// const getItems = (endpoint, options) => fetchData(endpoint, options);\n\n/// 8-ма домашня\nconst getItems = (token) => {\n  const options = {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json; charset=UTF-8',\n      Authorization: `Bearer ${token}`,\n    },\n  };\n  return fetchData(API_ENDPOINT, options);\n};\n\n\n\nconst saveItem = ( item,token,options = {}) => {\n  const finalOptions = {\n    method: \"POST\",\n    body: JSON.stringify(item),\n    headers: {\n      \"Content-Type\": \"application/json; charset=UTF-8\",\n      Authorization: `Bearer ${token}`\n    },\n    ...options,\n  };\n  return fetchData(API_ENDPOINT, finalOptions);\n};\n\nconst editItem = ({id,name,number}, token, options = {}) => {\n  const finalBody = {\n    name,\n    number\n  }\n  const finalOptions = {\n    method: \"PATCH\",\n    body: JSON.stringify(finalBody),\n    headers: {\n      \"Content-Type\": \"application/json; charset=UTF-8\",\n      Authorization: `Bearer ${token}`\n    },\n    ...options,\n  };\n  return fetchData(`${API_ENDPOINT}/${id}`, finalOptions);\n};\n\nconst deleteItem = (id, token, options = {}) => \n{\n  return fetchData(`${API_ENDPOINT}/${id}`, {\n    method: \"DELETE\",\n      headers: {\n      \"Content-Type\": \"application/json; charset=UTF-8\",\n      Authorization: `Bearer ${token}`\n    },  ...options\n  })};\n\nexport { getItems, saveItem,editItem, deleteItem };"],"mappings":"AACA;AAEA,MAAMA,QAAQ,GAAG,uCAAjB;AACA,MAAMC,YAAY,GAAG,UAArB;;AAEA,MAAMC,SAAS,GAAG,gBAAOC,IAAP,EAA8B;EAAA,IAAjBC,OAAiB,uEAAP,EAAO;EAC9C,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAE,GAAEN,QAAS,IAAGG,IAAK,EAArB,EAAwBC,OAAxB,CAAvB;EACA,OAAOC,GAAG,CAACE,EAAJ,GAASF,GAAG,CAACG,IAAJ,EAAT,GAAsBC,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAUN,GAAG,CAACO,UAAd,CAAf,CAA7B;AACD,CAHD,C,CAKA;AACA;AAEA;;;AACA,MAAMC,QAAQ,GAAIC,KAAD,IAAW;EAC1B,MAAMV,OAAO,GAAG;IACdW,MAAM,EAAE,KADM;IAEdC,OAAO,EAAE;MACP,gBAAgB,iCADT;MAEPC,aAAa,EAAG,UAASH,KAAM;IAFxB;EAFK,CAAhB;EAOA,OAAOZ,SAAS,CAACD,YAAD,EAAeG,OAAf,CAAhB;AACD,CATD;;AAaA,MAAMc,QAAQ,GAAG,UAAEC,IAAF,EAAOL,KAAP,EAA8B;EAAA,IAAjBV,OAAiB,uEAAP,EAAO;EAC7C,MAAMgB,YAAY,GAAG;IACnBL,MAAM,EAAE,MADW;IAEnBM,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeJ,IAAf,CAFa;IAGnBH,OAAO,EAAE;MACP,gBAAgB,iCADT;MAEPC,aAAa,EAAG,UAASH,KAAM;IAFxB,CAHU;IAOnB,GAAGV;EAPgB,CAArB;EASA,OAAOF,SAAS,CAACD,YAAD,EAAemB,YAAf,CAAhB;AACD,CAXD;;AAaA,MAAMI,QAAQ,GAAG,gBAAmBV,KAAnB,EAA2C;EAAA,IAA1C;IAACW,EAAD;IAAIC,IAAJ;IAASC;EAAT,CAA0C;EAAA,IAAjBvB,OAAiB,uEAAP,EAAO;EAC1D,MAAMwB,SAAS,GAAG;IAChBF,IADgB;IAEhBC;EAFgB,CAAlB;EAIA,MAAMP,YAAY,GAAG;IACnBL,MAAM,EAAE,OADW;IAEnBM,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeK,SAAf,CAFa;IAGnBZ,OAAO,EAAE;MACP,gBAAgB,iCADT;MAEPC,aAAa,EAAG,UAASH,KAAM;IAFxB,CAHU;IAOnB,GAAGV;EAPgB,CAArB;EASA,OAAOF,SAAS,CAAE,GAAED,YAAa,IAAGwB,EAAG,EAAvB,EAA0BL,YAA1B,CAAhB;AACD,CAfD;;AAiBA,MAAMS,UAAU,GAAG,UAACJ,EAAD,EAAKX,KAAL,EACnB;EAAA,IAD+BV,OAC/B,uEADyC,EACzC;EACE,OAAOF,SAAS,CAAE,GAAED,YAAa,IAAGwB,EAAG,EAAvB,EAA0B;IACxCV,MAAM,EAAE,QADgC;IAEtCC,OAAO,EAAE;MACT,gBAAgB,iCADP;MAETC,aAAa,EAAG,UAASH,KAAM;IAFtB,CAF6B;IAKpC,GAAGV;EALiC,CAA1B,CAAhB;AAMG,CARL;;AAUA,SAASS,QAAT,EAAmBK,QAAnB,EAA4BM,QAA5B,EAAsCK,UAAtC"},"metadata":{},"sourceType":"module"}