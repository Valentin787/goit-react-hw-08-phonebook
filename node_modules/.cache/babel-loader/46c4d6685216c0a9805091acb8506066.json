{"ast":null,"code":"var _jsxFileName = \"/Users/valentinkuzmich/Desktop/projects Go IT/goit-react-hw-08-phonebook/src/components/context/ContextAlarm.jsx\",\n    _s = $RefreshSig$();\n\nimport { createContext, useEffect, useRef, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useSelector } from \"react-redux\";\nimport { alarmState } from \"redux/alarm/alarmsSelectors\";\nimport Alarm from '../../alarmSignal.mp3';\nimport months, { monthTranslation } from \"../../data/data\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet alarm = new Audio(Alarm);\nalarm.loop = true;\nexport const AlarmContext = /*#__PURE__*/createContext();\n\nfunction ContextAlarm(_ref) {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const alarms = useSelector(alarmState);\n  const {\n    t\n  } = useTranslation();\n  const lang = useTranslation();\n  const [hourDigital, setHourDigital] = useState(\"\");\n  const [minutesDigital, setMinutesDigital] = useState(\"\");\n  const [amPm, setAmPm] = useState(\"\");\n  const [dayNow, setDayNow] = useState(\"\");\n  const [monthNow, setMonthNow] = useState(\"\");\n  const [yearNow, setYearNow] = useState(\"\");\n  const [alarmTime, setAlarmTime] = useState(\"\");\n  const [activeTime, setActiveTime] = useState(null);\n  const [hasAlarm, setHasAlarm] = useState(false);\n  const isCurrent = useRef(true);\n  useEffect(() => {\n    monthTranslation(lang.i18n.language);\n  }, [lang]);\n  useEffect(() => {\n    setInterval(() => {\n      let date = new Date();\n      let HH = date.getHours(),\n          MM = date.getMinutes(),\n          day = date.getDate(),\n          month = date.getMonth(),\n          year = date.getFullYear(),\n          ampm;\n\n      if (HH >= 12) {\n        HH = HH - 12;\n        ampm = \"PM\";\n      } else {\n        ampm = \"AM\";\n      }\n\n      if (HH === 0) HH = 12;\n      if (HH < 10) HH = `0${HH}`;\n      if (MM < 10) MM = `0${MM}`;\n      setHourDigital(HH);\n      setMinutesDigital(MM);\n      setAmPm(ampm);\n      setDayNow(day);\n      setMonthNow(months[month]);\n      setYearNow(year);\n    }, 1000);\n  }, []);\n  const currentTime = `${hourDigital}:${minutesDigital} ${amPm}`; //ACTIVE_PLAY\n\n  useEffect(() => {\n    if (isCurrent.current) {\n      isCurrent.current = false;\n      return;\n    }\n\n    ;\n\n    const activeAlarm = () => {\n      for (const item of alarms) {\n        if (item.time === currentTime && item.isToggle === true) {\n          setActiveTime(item);\n          alarm.play();\n          alarm.loop = true;\n          setHasAlarm(true);\n        }\n      }\n    };\n\n    activeAlarm();\n  }, [alarms, currentTime]);\n\n  const pauseAlarm = () => {\n    alarm.pause();\n    setAlarmTime(\"\");\n  };\n\n  useEffect(() => {\n    if (!activeTime) return;\n\n    if (activeTime.isToggle === false) {\n      alarm.pause();\n      setHasAlarm(false);\n      pauseAlarm();\n    }\n\n    setActiveTime(null);\n  }, [activeTime, currentTime]);\n  return /*#__PURE__*/_jsxDEV(AlarmContext.Provider, {\n    value: {\n      hourDigital,\n      minutesDigital,\n      amPm,\n      dayNow,\n      monthNow,\n      yearNow,\n      alarmTime,\n      setAlarmTime,\n      pauseAlarm,\n      hasAlarm,\n      setHasAlarm\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ContextAlarm, \"kw5GuzACz58QOCADCCHvXJRltu0=\", false, function () {\n  return [useSelector, useTranslation, useTranslation];\n});\n\n_c = ContextAlarm;\nexport default ContextAlarm;\n\nvar _c;\n\n$RefreshReg$(_c, \"ContextAlarm\");","map":{"version":3,"names":["createContext","useEffect","useRef","useState","useTranslation","useSelector","alarmState","Alarm","months","monthTranslation","alarm","Audio","loop","AlarmContext","ContextAlarm","children","alarms","t","lang","hourDigital","setHourDigital","minutesDigital","setMinutesDigital","amPm","setAmPm","dayNow","setDayNow","monthNow","setMonthNow","yearNow","setYearNow","alarmTime","setAlarmTime","activeTime","setActiveTime","hasAlarm","setHasAlarm","isCurrent","i18n","language","setInterval","date","Date","HH","getHours","MM","getMinutes","day","getDate","month","getMonth","year","getFullYear","ampm","currentTime","current","activeAlarm","item","time","isToggle","play","pauseAlarm","pause"],"sources":["/Users/valentinkuzmich/Desktop/projects Go IT/goit-react-hw-08-phonebook/src/components/context/ContextAlarm.jsx"],"sourcesContent":["import { createContext, useEffect, useRef, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useSelector } from \"react-redux\";\nimport { alarmState } from \"redux/alarm/alarmsSelectors\";\n\nimport Alarm from '../../alarmSignal.mp3'\nimport months, { monthTranslation } from \"../../data/data\";\n\nlet alarm = new Audio(Alarm);\n\talarm.loop = true;\n\nexport const AlarmContext = createContext();\n\nfunction ContextAlarm({ children }) {\n  const alarms = useSelector(alarmState)\n   \n  const { t } = useTranslation();\n  const lang = useTranslation();\n\n\n  const [hourDigital, setHourDigital] = useState(\"\");\n  const [minutesDigital, setMinutesDigital] = useState(\"\");\n  const [amPm, setAmPm] = useState(\"\");\n  const [dayNow, setDayNow] = useState(\"\");\n  const [monthNow, setMonthNow] = useState(\"\");\n  const [yearNow, setYearNow] = useState(\"\");\n  const [alarmTime, setAlarmTime] = useState(\"\");\n  const [activeTime, setActiveTime] = useState(null)\n\n  const [hasAlarm, setHasAlarm] = useState(false);\n\n  const isCurrent = useRef(true);\n\n  useEffect(() => {\n  monthTranslation(lang.i18n.language)\n}, [lang])\n\n  useEffect(() => {\n    setInterval(() => {\n      let date = new Date();\n\n      let HH = date.getHours(),\n        MM = date.getMinutes(),\n        day = date.getDate(),\n        month = date.getMonth(),\n        \n        year = date.getFullYear(),\n        ampm;\n\n      if (HH >= 12) {\n        HH = HH - 12;\n        ampm = \"PM\";\n      } else {\n        ampm = \"AM\";\n      }\n\n      if (HH === 0) HH = 12;\n      if (HH < 10) HH = `0${HH}`;\n      if (MM < 10) MM = `0${MM}`;\n\n      setHourDigital(HH);\n      setMinutesDigital(MM);\n      setAmPm(ampm);\n      setDayNow(day);\n      setMonthNow(months[month]);\n      setYearNow(year);\n    }, 1000);\n  }, []);\n\n  const currentTime = `${hourDigital}:${minutesDigital} ${amPm}`;\n  //ACTIVE_PLAY\n  useEffect(() => {\n    if (isCurrent.current) {\n      isCurrent.current = false;\n      return\n    };\n\n    const activeAlarm = () => {\n    for (const item of alarms) {\n    if (item.time === currentTime && item.isToggle === true) {\n      setActiveTime(item) \n      alarm.play();\n      alarm.loop = true;\n       setHasAlarm(true)\n     }\n    }\n    }\n   activeAlarm();\n  }, [alarms, currentTime])\n  \n   const pauseAlarm = () => {\n      \n     alarm.pause();\n     \n      setAlarmTime(\"\");\n   };\n  \n  \n  useEffect(() => {\n\n    if (!activeTime) return;\n\n    if (activeTime.isToggle === false) {\n      alarm.pause();\n      setHasAlarm(false);\n      pauseAlarm();\n    }\n    setActiveTime(null);\n\n  }, [activeTime, currentTime])\n  \n\n  return (\n    <AlarmContext.Provider\n      value={{\n        hourDigital,\n        minutesDigital,\n        amPm,\n        dayNow,\n        monthNow,\n        yearNow,\n        alarmTime,\n        setAlarmTime,\n        pauseAlarm,\n        hasAlarm,\n        setHasAlarm,\n      }}\n    >\n      {children}\n    </AlarmContext.Provider>\n  );\n}\n\nexport default ContextAlarm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}